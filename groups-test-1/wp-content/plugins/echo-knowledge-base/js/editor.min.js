"use strict";jQuery(document).ready(function(t){if("undefined"==typeof epkb_editor_config||null==epkb_editor_config||0==epkb_editor_config.length)return!0;window.EPKBEditor={init:function(){if(void 0!==this.initSettings)return;let e=this;t(document).on("epkb_js_error",function(t,i,n,s,o,a){e.errorHandler(i,n,s,o,a)}),t(document).on("click",".epkb-close-notice",e,function(e){t(this).closest(".eckb-bottom-notice-message").hasClass("eckb-bottom-notice-message--center-aligned")?e.data.toggleMode(e):(t(this).closest(".eckb-bottom-notice-message").remove(),t("body").removeClass("epkb-showing-message"))}),t(document).on("submit","#epkb-editor-error--form",e,this.sendErrorMessage),this.showLoader(),this.addModalWrap(),this.initSettings=Object.assign({},epkb_editor_config),this.currentSettings=Object.assign({},epkb_editor_config),this.currentEditorSettings=Object.assign({},epkb_editor_settings),this.activeZone="",this.addIframe()},addModalWrap:function(){if(t("#epkb-editor").length>0)return!0;t("body").append(EPKBEditorTemplates.modalWindow()),t(".epkb-editor-settings__panel-content-container").append(EPKBEditorTemplates.notice({icon:"arrow-circle-right",title:epkb_editor.clear_modal_notice,style:"edit-zone"})),this.modal=t("#epkb-editor"),this.showModal(),this.bindModalEvents(),t(".epkb-editor-settings__panel-content-container .epkb-editor-settings__help").hide()},addIframe:function(){let e=document.createElement("iframe");this.url=new URL(location.href),this.url.searchParams.set("epkb-editor-page-loaded","1"),e.src=this.url,e.id="epkb-editor-iframe";let i=this;this.loadingIframe=setTimeout(function(){i.errorHandler("timeout1")},2e4),this.longLoadingIframe=setTimeout(function(){i.errorHandler("timeout2")},4e4),document.body.appendChild(e),t("#epkb-editor-iframe").on("load",this,this.afterLoadIframe)},afterLoadIframe:function(e){let i=e.data;if(i.url.href!=t("#epkb-editor-iframe").prop("src"))return void t("#epkb-editor-iframe").prop("src",i.url.href);if(i.iframe=t("#epkb-editor-iframe").contents(),!i.iframe.length||!i.iframe.find('[class*="epkb"], [class*="eckb"], [class*="elay"]').length){i.removeLoader();t("#epkb-editor-iframe")[0].contentWindow.document;return}t(".epkb-frontend-loader").addClass("epkb-frontend-loader--iframe");let n=t("#epkb-editor-iframe")[0].contentWindow.epkb_editor_config;for(let t in n)if(void 0!==i.currentSettings[t]){for(let e in n[t].settings)void 0===i.currentSettings[t].settings[e]&&(i.currentSettings[t].settings[e]=n[t].settings[e]);for(let e in i.currentSettings[t].settings)void 0===n[t].settings[e]&&delete i.currentSettings[t].settings[e]}else i.currentSettings[t]=n[t];for(let t in i.currentSettings)void 0!==n&&void 0===n[t]&&delete i.currentSettings[t];t("[name=theme_presets]").length&&i.refreshPanel(i),i.iframe.find("body").append('<style type="text/css" id="epkb-editor-style"></style>'),i.styles=i.iframe.find("#epkb-editor-style"),(void 0===i.loadingIframe||i.loadingIframe)&&t("body").addClass("epkb-edit-mode"),i.iframe.find("body").addClass("epkb-editor-preview");let s=i.iframe.find("#eckb-article-content-body").position();if(i.iframe.find(".eckb-article-page--L-sidebar-to-content").length>0&&(i.iframe.find("#eckb-article-page-container-v2").find("#eckb-article-left-sidebar ").css("margin-top",s.top+"px"),i.iframe.find("#eckb-article-page-container-v2").find("#eckb-article-left-sidebar").append("<style>#eckb-article-page-container-v2 #eckb-article-left-sidebar:before { height: "+s.top+"px; }</style>")),i.iframe.find(".eckb-article-page--R-sidebar-to-content").length>0&&(i.iframe.find("#eckb-article-page-container-v2").find("#eckb-article-right-sidebar ").css("margin-top",s.top+"px"),i.iframe.find("#eckb-article-page-container-v2").find("#eckb-article-right-sidebar").append("<style>#eckb-article-page-container-v2 #eckb-article-right-sidebar:before { height: "+s.top+"px; }</style>")),i.addEditZones(),i.iframe.find("#eckb-article-left-sidebar").length&&!i.iframe.find("#eckb-article-left-sidebar").hasClass("epkb-editor-zone")&&i.iframe.on("click","#eckb-article-left-sidebar",function(t){return i.showMessage({text:epkb_editor.sidebar_settings,type:"attention",timeout:5e3}),!1}),i.iframe.find("#eckb-article-right-sidebar").length&&!i.iframe.find("#eckb-article-right-sidebar").hasClass("epkb-editor-zone")&&i.iframe.on("click","#eckb-article-right-sidebar",function(t){return i.showMessage({text:epkb_editor.sidebar_settings,type:"attention",timeout:5e3}),!1}),i.iframe.on("click",".epkb-editor-zone",i,i.onZoneClick),i.iframe.on("click",".epkb-editor-zone__tabs",!1),i.iframe.on("click",".epkb-editor-zone__tab--parent",function(e){e.stopPropagation();let i=t(this).data("zone");t(this).parents(".epkb-editor-zone").each(function(){t(this).data("zone")==i&&(t(this).trigger("click"),i=!1)})}),i.iframe.find("a:not(.eckb-redirect-link)").each(function(e){t(this).on("click",function(t){t.preventDefault()})}),i.iframe.on("click","a:not(.eckb-redirect-link)",function(t){t.preventDefault()}),i.iframe.on("submit","form:not(#epkb-settings-form)",function(t){return i.removeLoader(),!1}),i.iframe.find(".epkb-editor-zone").hover(function(){t(this).addClass("hover");let e=t(this).parents(".epkb-editor-zone");e.length&&setTimeout(function(){e.removeClass("hover")},50)},function(){t(this).removeClass("hover"),t(this).parents(".epkb-editor-zone").length&&!t(this).parents(".epkb-editor-zone--active").length&&t(this).parents(".epkb-editor-zone").eq(0).addClass("hover")}),i.iframe.find('input[name="epkb_search_terms"]').prop("autocomplete","off"),i.updateStyles(),i.updateAttributes(),i.updateText(),"templates"==epkb_editor.preopen&&(epkb_editor.preopen="open_themes",t(".epkb-editor-header__inner__config").trigger("click"),t(".epkb-editor-settings-menu__group-item-container[data-name=templates]").trigger("click")),"templates"!==epkb_editor.preopen&&"open_themes"!==epkb_editor.preopen&&epkb_editor.preopen&&(i.preselectZone=epkb_editor.preopen,epkb_editor.preopen=void 0),void 0===i.preselectZone||void 0===i.currentSettings[i.preselectZone]||0==i.iframe.find(i.currentSettings[i.preselectZone].classes).length)return i.removeLoader(),void i.clearErrorTimeouts();void 0===i.preselectEq&&(i.preselectEq=0),i.iframe.find(i.currentSettings[i.preselectZone].classes).eq(i.preselectEq).trigger("click"),"help_dialog"==i.preselectZone&&"none"==i.iframe.find("#eckb-help-dialog").css("display")&&i.iframe.find(".eckb-help-dialog-toggle").trigger("click"),void 0!==i.iframeScroll&&i.iframe.scrollTop(i.iframeScroll),i.preselectZone=void 0,i.removeLoader(),i.clearErrorTimeouts()},addEditZones:function(){for(let t in this.currentSettings){let e=this.iframe.find(this.currentSettings[t].classes);0!=e.length&&(e.addClass("epkb-editor-zone"),e.data("zone",t))}},bindModalEvents:function(){t(document).on("click","#epkb-editor-close",this,this.hideModal),t("#epkb-editor-exit").on("click",this,this.toggleMode),t(document).on("change keyup","#epkb-editor input:not([type=number]):not([type=text]), #epkb-editor textarea, #epkb-editor select",this,this.onFieldChange),t(document).on("change keyup","#epkb-editor input[type=number], #epkb-editor input[type=text]",this,function(e){let i=e.data,n=t(this);void 0!==i.numberTimer&&i.numberTimer&&clearTimeout(i.numberTimer),i.numberTimer=setTimeout(function(){i.onFieldChange(e,n,i)},500)}),t(document).on("click","#epkb-editor .epkb-editor-settings__panel-navigation__tab:not(.epkb-editor-settings__panel-navigation__tab--disabled)",this,this.onTabClick),t(document).on("click",".epkb-editor-settings-menu__group-item-container",this,this.onMenuItemClick),t(document).on("click","#epkb-editor .epkb-editor-settings-control__input__linking",this,this.toggleLinkedDimensions),t(document).on("click","#epkb-editor-save",this,this.saveSettings),t(document).on("click",".epkb-editor-header__inner__config",this,this.showSettings),t(document).on("click","#epkb-editor-show-navigation",this,function(t){t.stopPropagation(),t.data.showNavigation()}),t(document).on("click",".epkb-editor-navigation__link",this,function(e){let i=e.data,n=i.iframe,s=t(this).data("zone");!n.find("#epkb_tab_1").length||"category_header_zone"!=s&&"categories_zone"!=s&&"category_box_zone"!=s&&"articles_zone"!=s||(n.find(".epkb_top_categories.active").removeClass("active"),n.find("#epkb_tab_1").addClass("active"),n.find(".epkb_top_panel.active").removeClass("active"),n.find(".epkb_tab_1").addClass("active"));let o=!1;if(n.find(".elay-articles").each(function(){if(t(this).is(":visible"))return o=t(this),!1}),!n.find(".elay-top-class-collapse-on").length||n.find(".elay-sidebar__cat__top-cat").first().hasClass("elay-active-top-category")||"sidebar_category_zone"!=s&&("sidebar_articles_zone"!=s||o)||n.find(".elay-sidebar__cat__top-cat__heading-container").first().trigger("click",[!1]),!n.find("#asea-doc-search-container").length||n.find("#asea-doc-search-container").is(":visible")||"search_box_zone"!=s&&"search_title_zone"!=s&&"search_below_title_zone"!=s&&"search_input_zone"!=s&&"search_box_below_input_zone"!=s||n.find(".asea-search-toggle").first().trigger("click"),!o&&"sidebar_articles_zone"==s){let e=n.find(".elay-articles").first();e.is(":visible")||e.parents("li").each(function(){t(this).children(".elay-category-level-2-3").trigger("click",[!1])})}void 0!==t(this).data("target")&&t(this).data("target")||void 0===i.currentSettings[t(this).data("zone")]||t(this).data("target",i.currentSettings[t(this).data("zone")].classes);let a=o&&"sidebar_articles_zone"==s?o:n.find(t(this).data("target")).first();return a.length&&(a.offset().top-50<n.scrollTop()||a.offset().top>n.scrollTop()+t(window).height())&&n.find("html").animate({scrollTop:a.offset().top-100},200),void 0!==e.originalEvent&&t(e.target).hasClass("epkb-editor-navigation__link__help")||0==t(this).closest(".epkb-editor-navigation").length?a.trigger("click"):(i.iframe.find(".epkb-editor-zone").removeClass("epkb-editor-zone--active"),a.addClass("epkb-editor-zone--active"),a.find(".epkb-editor-zone.hover").removeClass("hover"),i.iframe.find(".epkb-editor-zone__tabs").remove(),"search_input_zone"==s?(i.addTabsToZone(a.parent(),s),a.parent().addClass("epkb-editor-zone--active-visibility")):i.addTabsToZone(a,s)),!1}),t(document).on("click",".epkb-editor-navigation__activate-disabled-link",this,function(e){return t(".epkb-editor-header__inner__config").trigger("click"),t("#epkb-editor-settings-tab-hidden").trigger("click"),!1}),t(document).on("click","#epkb-editor-popup__button-cancel",this,this.onCancelWpEditor),t(document).on("click","#epkb-editor-popup__button-update",this,this.onSaveWpEditor),t(document).on("click",".epkb-editor-settings-wpeditor_button",this,this.showWpEditor),t(document).on("click",".epkb-editor-header__inner__back-btn",this,this.onBackClick),t(document).on("click",".epkb-editor-header__inner__close-btn",this,this.onCloseClick),t("#epkb-editor").on("click",".epkb-editor-header__inner__menu-btn",this,this.showMenu),t("#epkb-editor").on("click","#eprf_edit_feedback_zone",this,function(t){return t.data.iframe.find("#eprf-article-feedback-container").trigger("click"),!1}),t(document).on("click",".epkb-editor-settings-control-type-select--prev-button",this,function(e){let i=t(this).closest(".epkb-editor-settings-control__field").find("select"),n=[],s=[],o=t(this);if(i.find("option").each(function(){n.push(t(this).val()),s.push(t(this).text())}),!n.length)return app.showMessage({text:epkb_editor.wrong_select,type:"error"}),!0;if(o.parent().find(".epkb-editor-settings-control-type-select--next-button").css({visibility:"visible"}),!~n.indexOf(i.val().toString()))return i.val(n[0]),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[0]),o.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"hidden"}),i.trigger("change"),!0;let a=!1;n.forEach(function(t,e,n){return!(!a&&t==i.val())||(0==e?(i.val(t),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[e]),o.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"hidden"}),void(a=!0)):1==e?(i.val(n[e-1]),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[e-1]),o.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"hidden"}),void(a=!0)):(i.val(n[e-1]),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[e-1]),o.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"visible"}),void(a=!0)))}),i.trigger("change")}),t(document).on("click",".epkb-editor-settings-control-type-select--next-button",this,function(e){let i=t(this).closest(".epkb-editor-settings-control__field").find("select"),n=[],s=[],o=t(this);if(i.find("option").each(function(){n.push(t(this).val()),s.push(t(this).text())}),!n.length)return app.showMessage({text:epkb_editor.wrong_select,type:"error"}),!0;if(o.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"visible"}),!~n.indexOf(i.val().toString()))return i.val(n[n.length-1]),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[n.length-1]),i.trigger("change"),!0;let a=!1;n.forEach(function(t,e,n){if(!a&&t==i.val().toString()){if(e==n.length-1)return i.val(t),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[e]),o.parent().find(".epkb-editor-settings-control-type-select--next-button").css({visibility:"hidden"}),void(a=!0);i.val(n[e+1]),o.parent().find(".epkb-editor-settings-control-type-select--label").text(s[e+1]),e>=n.length-2?o.parent().find(".epkb-editor-settings-control-type-select--next-button").css({visibility:"hidden"}):o.parent().find("epkb-editor-settings-control-type-select--next-button").css({visibility:"visible"}),a=!0}}),i.trigger("change")}),t(document).on("click",".epkb-editor-settings-typography_button",this.onTypographyEditButtonClick),t(document).on("click",".epkb-editor-settings-typography_form",this.onTypographyBodyClick),t(document).on("click",this.onTypographyOutClick),t(document).on("click.epkbcolorpicker",this.onTypographyOutClick)},clearModal:function(){t(".epkb-editor-container").removeClass("epkb-editor-container--navigator"),t(".epkb-editor-header__inner__title").html(""),t(".epkb-editor-settings__panel-navigation-container").html(""),t(".epkb-editor-settings__panel-content-container").html(EPKBEditorTemplates.modalTabsBody()),t(".epkb-editor-settings__panel-navigation-container, .epkb-editor-settings__panel-content-container").show(),t(".epkb-editor-settings-menu-container").hide(),this.iframe.find(".epkb-editor-zone__tabs").remove(),t("#epkb-editor-show-navigation").removeClass("epkb-editor-show-navigation--active")},showMenuButtons:function(){t(".epkb-editor-header__inner__menu-btn").show(),t(".epkb-editor-header__inner__config").show(),t(".epkb-editor-header__inner__back-btn").hide(),t(".epkb-editor-header__inner__close-btn").hide()},showBackButtons:function(){t(".epkb-editor-header__inner__menu-btn").hide(),t(".epkb-editor-header__inner__config").hide(),t(".epkb-editor-header__inner__back-btn").show(),t(".epkb-editor-header__inner__close-btn").show(),"settings"===this.activeZone&&"menu"===this.activeZone&&"settings_panels"===this.activeZone||(this.lastActiveZone=this.activeZone)},onTabClick:function(e){e.stopPropagation();let i=t(this).data("target");t(".epkb-editor-settings__panel-navigation__tab").removeClass("epkb-editor-settings__panel-navigation__tab--active"),t(".epkb-editor-settings__panel").removeClass("epkb-editor-settings__panel--active"),t(this).addClass("epkb-editor-settings__panel-navigation__tab--active"),t("#epkb-editor-settings-panel-"+i).addClass("epkb-editor-settings__panel--active")},onMenuItemClick:function(e){if("#"!=t(this).attr("href"))return!0;let i=e.data;return t(".epkb-editor-settings-panel-global__links-container, .epkb-editor-settings__panel-navigation-container").hide(),t("#epkb-editor-settings-panel-global>.epkb-editor-settings-control-container").hide(),"templates"==t(this).data("name")&&t("#epkb-editor-settings-templates").show(),"layouts"==t(this).data("name")&&t("#epkb-editor-settings-layouts").show(),i.showBackButtons(),i.activeZone="settings_panels",!1},onBackClick:function(e){e.stopPropagation();let i=e.data;"settings_panels"==i.activeZone?i.showSettings(e):void 0!==i.currentSettings[i.lastActiveZone]?(i.iframe.find(i.currentSettings[i.lastActiveZone].classes).trigger("click"),i.showMenuButtons()):(i.clearModal(),t(".epkb-editor-header__inner__title").html(epkb_editor.epkb_name),t(".epkb-editor-settings__panel-content-container").append(EPKBEditorTemplates.notice({icon:"info-circle",title:epkb_editor.clear_modal_notice,style:"edit-zone"})),t(".epkb-editor-settings__help").hide(),i.showMenuButtons())},onCloseClick:function(e){e.stopPropagation();let i=e.data;void 0!==i.currentSettings[i.lastActiveZone]?(i.iframe.find(i.currentSettings[i.lastActiveZone].classes).trigger("click"),i.showMenuButtons()):(i.clearModal(),t(".epkb-editor-header__inner__title").html(epkb_editor.epkb_name),t(".epkb-editor-settings__panel-content-container").append(EPKBEditorTemplates.notice({icon:"info-circle",title:epkb_editor.clear_modal_notice,style:"edit-zone"})),t(".epkb-editor-settings__help").hide(),i.showMenuButtons())},onFieldChange:function(e,i,n){void 0===i&&(i=t(this)),void 0===n&&(n=e.data);let s=i.attr("name"),o=i.val(),a=!1,r=!1;if("checkbox"==i.prop("type")&&(o=i.prop("checked")?"on":"off"),"number"==i.attr("type")&&""==o&&(void 0!==i.attr("min")?o=i.attr("min"):void 0!==i.attr("max")&&(o=i.attr("max"))),i.closest("#epkb-editor-settings-panel-hidden").length>0){if(void 0===n.currentSettings[s])return;if("on"==o){for(let t in n.currentSettings[s].disabled_settings){let e=n.getOptionsList(t),i=!1;if(!(e.length<1||i))if("toc"!=s)"elay_sidebar_navigation_zone"==s&&n.updateOption("article-left-sidebar-toggle","on"),n.currentSettings[s].disabled_settings[t]==e[0]?n.updateOption(t,e[1]):n.updateOption(t,e[0]);else{if(n.isLeftPanelActive()){n.updateOption("toc_left","1"),n.preselectZone=s,n.activeZone="",i=!0;continue}if(n.isRightPanelActive()){n.updateOption("toc_right","1"),n.preselectZone=s,n.activeZone="",i=!0;continue}n.updateOption("toc_content","1"),n.preselectZone=s,n.activeZone="",i=!0}}n.preselectZone=s,n.activeZone=""}else for(let t in n.currentSettings[s].disabled_settings)n.updateOption(t,n.currentSettings[s].disabled_settings[t]);n.refreshIframe(n)}else{if(i.closest(".epkb-editor-settings-control-type-dimensions").length>0){let t=i.closest(".epkb-editor-settings-control-type-dimensions").data("field"),e=i.closest(".epkb-editor-settings-control-type-dimensions").find(".epkb-editor-settings-control__input__linking").hasClass("epkb-editor-settings-control__input__linking--active");for(let r in n.currentSettings)if(void 0!==n.currentSettings[r].settings[t]&&void 0!==n.currentSettings[r].settings[t].subfields[s]&&(n.currentSettings[r].settings[t].subfields[s].value=o,void 0!==n.currentSettings[r].settings[t].subfields[s].reload&&(a=!0),e)){i.closest(".epkb-editor-settings-control-type-dimensions").find("input").val(o);for(let e in n.currentSettings[r].settings[t].subfields)n.currentSettings[r].settings[t].subfields[e].value=o}}if(i.closest(".epkb-editor-settings-control-type-multiple").length>0){let t=i.closest(".epkb-editor-settings-control-type-multiple").data("field");for(let e in n.currentSettings)void 0!==n.currentSettings[e].settings[t]&&void 0!==n.currentSettings[e].settings[t].subfields[s]&&(n.currentSettings[e].settings[t].subfields[s].value=o,void 0!==n.currentSettings[e].settings[t].subfields[s].reload&&(a=!0))}if("advanced_search_presets"==s&&"undefined"!=typeof epkb_editor_addon_data&&void 0!==epkb_editor_addon_data.asea_presets&&void 0!==epkb_editor_addon_data.asea_presets[o]){for(let t in epkb_editor_addon_data.asea_presets[o])n.updateOption(t,epkb_editor_addon_data.asea_presets[o][t]);r=!0,a=!0}if("theme_presets"==s&&void 0!==n.theme_presets&&("current"==o||void 0!==n.theme_presets[o])){void 0===n.theme_presets.current&&(n.theme_presets.current={});for(let t in n.theme_presets[o])void 0===n.theme_presets.current[t]&&(n.theme_presets.current[t]=n.getOption(t)),n.updateOption(t,n.theme_presets[o][t]);r=!0,a=!0}if("search_presets"==s&&void 0!==n.search_presets&&("current"==o||void 0!==n.search_presets[o])){void 0===n.search_presets.current&&(n.search_presets.current={});for(let t in n.search_presets[o])void 0===n.search_presets.current[t]&&(n.search_presets.current[t]=n.getOption(t)),n.updateOption(t,n.search_presets[o][t]);r=!0,a=!0}if("categories_presets"==s&&void 0!==n.categories_presets&&("current"==o||void 0!==n.categories_presets[o])){void 0===n.categories_presets.current&&(n.categories_presets.current={});for(let t in n.categories_presets[o])void 0===n.categories_presets.current[t]&&(n.categories_presets.current[t]=n.getOption(t)),n.updateOption(t,n.categories_presets[o][t]);r=!0,a=!0}i.closest(".epkb-editor-settings-typography_field").length>0&&(o={},i.closest(".epkb-editor-settings-typography_form").find("select, input, textarea").each(function(){o[t(this).data("typography")]=t(this).val()}));for(let t in n.currentSettings)void 0!==n.currentSettings[t].settings[s]&&(n.currentSettings[t].settings[s].value=o,void 0!==n.currentSettings[t].settings[s].reload&&(a=!0));if("article-page"==epkb_editor.page_type){let t=n.currentSettings.left_sidebar.settings,e=n.isLeftPanelActive()?t["article-left-sidebar-desktop-width-v2"].value:0,i=n.currentSettings.right_sidebar.settings,o=n.isRightPanelActive()?i["article-right-sidebar-desktop-width-v2"].value:0;~["article-right-sidebar-desktop-width-v2","article-right-sidebar-tablet-width-v2","article-left-sidebar-desktop-width-v2","article-left-sidebar-tablet-width-v2"].indexOf(s)&&(n.currentSettings.article_content.settings["article-content-desktop-width-v2"].value=100-e-o)}void 0!==n.currentEditorSettings.settings_zone.settings[s]&&(n.currentEditorSettings.settings_zone.settings[s].value=o,void 0!==n.currentEditorSettings.settings_zone.settings[s].reload&&(a=!0)),n.checkTogglers(),n.updateStyles(),n.updateAttributes(),n.updateText(),n.currentPreset=!1,"theme_presets"==s&&void 0!==n.theme_presets[o]&&(n.currentPreset=n.theme_presets[o]),"search_presets"==s&&void 0!==n.search_presets[o]&&(n.currentPreset=n.search_presets[o]),"categories_presets"==s&&void 0!==n.categories_presets[o]&&(n.currentPreset=n.categories_presets[o]),a&&n.refreshIframe(n),r&&n.refreshPanel(n);for(let t in n.currentSettings){if("search_box_zone"==t)continue;let e=n.currentSettings[t],i=!1;if(void 0!==e.disabled_settings&&void 0!==e.disabled_settings[s]){for(let t in e.disabled_settings){n.getOption(t)!=e.disabled_settings[t]&&(i=!0)}i||n.showNavigation(!0)}}}},addField:function(t,e){switch(e.type){case"color_hex":this.addColorPicker(t,e);break;case"text":this.addText(t,e);break;case"wp_editor":this.addWpEditor(t,e);break;case"header":this.addHeader(t,e);break;case"header_desc":this.addheader_desc(t,e);break;case"select":case"preset":this.addSelect(t,e);break;case"divider":this.addDivider(t,e);break;case"checkbox":this.addCheckbox(t,e);break;case"number":this.addNumber(t,e);break;case"units":this.addUnits(t,e);break;case"raw_html":this.addRawHtml(t,e);break;case"typography":this.addTypography(t,e)}switch(e.group_type){case"dimensions":this.addDimensions(t,e);break;case"multiple":this.addMultiple(t,e)}},addHeader:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.header({name:e,content:i.content}))},addheader_desc:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.header_desc({title:i.title,desc:i.desc,name:e}))},addText:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.text({name:e,label:i.label,value:i.value,style:i.style,separator_above:i.separator_above,html:void 0!==i.html,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description}))},addNumber:function(e,i){let n={name:e,label:i.label,value:i.value,style:i.style,separator_above:i.separator_above,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description};void 0!==i.style&&(n.style=i.style),void 0!==i.max&&(n.max=i.max),void 0!==i.min&&(n.min=i.min);let s;(s=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.number(n))},addUnits:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.units({name:e,value:i.value,options:i.options}))},addDimensions:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.dimensions({name:e,label:i.label,subfields:i.subfields,units:void 0===i.units?"":i.units,linked:void 0===i.linked?"":i.linked,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description}))},addMultiple:function(e,i){let n=t(`<div class="epkb-editor-settings-control-type-multiple" data-field="${e}"></div>`);t("#epkb-editor-settings-panel-"+i.editor_tab).append(n);for(let t in i.subfields)i.subfields[t].editor_tab=i.editor_tab,i.subfields[t].element_wrapper=n,this.addField(t,i.subfields[t])},addSelect:function(e,i){let n;if(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper,void 0===i.value&&(i.value=i.default),n.append(EPKBEditorTemplates.select({name:e,label:i.label,value:i.value,style:i.style,options:i.options,separator_above:i.separator_above,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description})),"prev-next"==i.style){let t=n.find("[name="+e+"]");t.val()==t.find("option").first().val()&&t.parent().find(".epkb-editor-settings-control-type-select--prev-button").css({visibility:"hidden"}),t.val()==t.find("option").last().val()&&t.parent().find(".epkb-editor-settings-control-type-select--next-button").css({visibility:"hidden"})}},addCheckbox:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.checkbox({name:e,label:i.label,value:i.value,separator_above:i.separator_above,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description}))},addColorPicker:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.colorPicker({name:e,label:i.label,value:i.value,separator_above:i.separator_above,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description}))},addDivider:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.divider())},addWpEditor:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.wpEditor({name:e,label:i.label,value:i.value,info_url:void 0===i.info_url?"":i.info_url,description:void 0===i.description?"":i.description}))},showWpEditor:function(e){let i=e.data,n=t(this).closest(".epkb-editor-settings-control-type-wp-editor").data("field"),s=i.getOption(n);return t("#epkbeditormce").val(s),t("#epkbeditormce").data("fieldName",n),t(".epkb-editor-popup__header").text(t("textarea[name="+n+"]").closest(".epkb-editor-settings-control__field").find(".epkb-editor-settings-control__title").text()),t(".epkb-editor-popup").addClass("epkb-editor-popup--active"),!1},onSaveWpEditor:function(e){e.data;let i=t("#epkbeditormce").val(),n=t("#epkbeditormce").data("fieldName");t("textarea[name="+n+"]").val(i),t(".epkb-editor-popup").removeClass("epkb-editor-popup--active"),t("textarea[name="+n+"]").trigger("change")},onCancelWpEditor:function(){t(".epkb-editor-popup").removeClass("epkb-editor-popup--active")},addRawHtml:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.rawHtml({name:e,content:i.content}))},addTypography:function(e,i){let n;(n=void 0===i.element_wrapper?t("#epkb-editor-settings-panel-"+i.editor_tab):i.element_wrapper).append(EPKBEditorTemplates.typography({label:i.label,name:e,value:i.value}))},onTypographyEditButtonClick:function(e){return t(this).closest(".epkb-editor-settings-control__field").find(".epkb-editor-settings-typography_form").hasClass("active")?t(".epkb-editor-settings-typography_form").removeClass("active"):(t(".epkb-editor-settings-typography_form").removeClass("active"),t(this).closest(".epkb-editor-settings-control__field").find(".epkb-editor-settings-typography_form").addClass("active")),!1},onTypographyBodyClick:function(t){t.stopPropagation()},onTypographyOutClick:function(e){t(".epkb-editor-settings-typography_form").removeClass("active")},onZoneClick:function(e,i){let n,s;if(void 0!==e?(e.stopPropagation(),n=t(this).data("zone"),s=e.data):n=(s=this).activeZone,t("body").trigger("click.epkbcolorpicker"),void 0!==i&&!i)return;if(s.showMenuButtons(),s.iframe.find(".epkb-editor-zone").removeClass("epkb-editor-zone--active"),s.iframe.find(".epkb-editor-zone--active-visibility").removeClass("epkb-editor-zone--active-visibility"),t(this).addClass("epkb-editor-zone--active"),t(this).find(".epkb-editor-zone.hover").removeClass("hover"),s.iframe.find(".epkb-editor-zone__tabs").remove(),s.clearModal(),n!=s.activeZone&&void 0!==s.theme_presets&&(delete s.theme_presets.current,delete s.search_presets.current,delete s.categories_presets.current),void 0!==s.currentSettings[n]&&void 0!==s.currentSettings[n].title&&t(".epkb-editor-header__inner__title").html(s.currentSettings[n].title),void 0===s.currentSettings[n])return t(".epkb-editor-header__inner__title").html(epkb_editor.epkb_name),t(".epkb-editor-settings__panel-content-container").append(EPKBEditorTemplates.notice({title:epkb_editor.no_settings})),s.activeZone="",!0;s.activeZone=n;let o=[];for(let t in s.currentSettings[n].settings)~o.indexOf(s.currentSettings[n].settings[t].editor_tab)||o.push(s.currentSettings[n].settings[t].editor_tab);t(".epkb-editor-settings__panel-navigation-container").append(EPKBEditorTemplates.modalTabsHeader(o));for(let t in s.currentSettings[n].settings)s.addField(t,s.currentSettings[n].settings[t]);t("#epkb-editor-settings-panel-content").html()||void 0!==s.activeTab||(t("#epkb-editor-settings-panel-content").removeClass("epkb-editor-settings__panel--active"),t("#epkb-editor-settings-panel-"+o[0]).addClass("epkb-editor-settings__panel--active")),void 0!==s.activeTab&&(t("#epkb-editor-settings-tab-"+s.activeTab).trigger("click"),s.activeTab=void 0),void 0!==e&&("search_input_zone"==n?(s.addTabsToZone(t(this).parent()),t(this).parent().addClass("epkb-editor-zone--active-visibility")):s.addTabsToZone(t(this))),s.activateColorPickers(),s.activateSliders(),s.checkTogglers(),s.showModal(),s.loadThemes()},addTabsToZone:function(t,e){let i="";if(this.iframe.find(".epkb-editor-zone__tabs").remove(),!this.activeZone&&void 0===e)return;i=void 0===e?this.activeZone:e;let n=this.currentSettings[i].zone_tab_title;void 0===n&&(n=this.currentSettings[i].title);let s=`\n\t\t\t\t<div class="epkb-editor-zone__tabs">\n\t\t\t\t\t<div class="epkb-editor-zone__tab--active">${n}</div>\n\t\t\t`,o=t.parents(".epkb-editor-zone").eq(0);void 0===e&&o.length&&void 0!==this.currentSettings[o.data("zone")].parent_zone_tab_title&&(s+=`<div class="epkb-editor-zone__tab--parent" data-zone="${o.data("zone")}">${this.currentSettings[o.data("zone")].parent_zone_tab_title}<span class="epkb-editor-zone__tab--parent-icon epkbfa epkbfa-arrow-up"></span></div>`),s+="</div>",t.append(s)},toggleLinkedDimensions(e){if(t(this).hasClass("epkb-editor-settings-control__input__linking--active"))return t(this).removeClass("epkb-editor-settings-control__input__linking--active"),!0;let i=t(this).closest(".epkb-editor-settings-control__fields").find("input").first();t(this).addClass("epkb-editor-settings-control__input__linking--active"),t(this).closest(".epkb-editor-settings-control__fields").find("input").val(i.val()),i.trigger("change")},updateStyles:function(){this.styles.html("");for(let t in this.currentSettings)for(let e in this.currentSettings[t].settings){let i=this.currentSettings[t].settings[e];if("string"==typeof i.toggler){if("off"==this.getOption(i.toggler))continue}else if("object"==typeof i.toggler){let t=!0;for(let e in i.toggler){this.getOption(e)!==i.toggler[e]&&(t=!1)}if(!t)continue}let n="!important";if(void 0===i.style_important||i.style_important||(n=""),"dimensions"!=i.group_type){if("multiple"==i.group_type){if("string"!=typeof i.style_template||void 0===i.target_selector||void 0===i.style_name)continue;let t=i.style_template;for(let e in i.subfields){let n=i.subfields[e];t=t.replace(e,n.value+this.getPostfix(n.postfix))}this.styles.append(`\n\t\t\t\t\t\t\t${i.target_selector} {\n\t\t\t\t\t\t\t\t${i.style_name}: ${t}${n};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`)}if("typography"!=i.type){if(void 0!==i.styles)for(let t in i.styles)this.styles.append(`\n\t\t\t\t\t\t\t\t${t} {\n\t\t\t\t\t\t\t\t\t${i.styles[t]}: ${i.value}${this.getPostfix(i.postfix)}${n};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t`);void 0!==i.target_selector&&void 0!==i.style_name&&this.styles.append(`\n\t\t\t\t\t\t${i.target_selector} {\n\t\t\t\t\t\t\t${i.style_name}: ${i.value}${this.getPostfix(i.postfix)}${n};\n\t\t\t\t\t\t}\n\t\t\t\t\t`)}else{let t="";if(void 0!==i.value["font-family"]&&(i.value["font-family"]?t+=`font-family: ${i.value["font-family"]}${n};`:this.iframe.find(i.target_selector).css({"font-family":""})),void 0!==i.value["font-weight"]&&(i.value["font-weight"]?t+=`font-weight: ${i.value["font-weight"]}${n};`:this.iframe.find(i.target_selector).css({"font-weight":""})),void 0!==i.value["font-size"])if(i.value["font-size"]){let e="px";void 0!==i.value["font-size-units"]&&(e=i.value["font-size-units"]),t+=`font-size: ${i.value["font-size"]}${i.value["font-size-units"]}${n};`}else this.iframe.find(i.target_selector).css({"font-size":""});this.styles.append(`\n\t\t\t\t\t\t\t${i.target_selector} {\n\t\t\t\t\t\t\t\t${t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`)}}else for(let t in i.subfields){let e=i.subfields[t];if(void 0!==e.styles)for(let t in e.styles)this.styles.append(`\n\t\t\t\t\t\t\t\t\t\t${t} {\n\t\t\t\t\t\t\t\t\t\t\t${e.styles[t]}: ${e.value}${this.getPostfix(e.postfix)}${n};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t`);void 0!==e.target_selector&&void 0!==e.style_name&&this.styles.append(`\n\t\t\t\t\t\t\t\t${e.target_selector} {\n\t\t\t\t\t\t\t\t\t${e.style_name}: ${e.value}${this.getPostfix(e.postfix)}${n};\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t`)}}if("article-page"==epkb_editor.page_type){let t,e=this.currentSettings.left_sidebar.settings,i=this.currentSettings.right_sidebar.settings,n=0,s=0;this.isLeftPanelActive()&&(n=e["article-left-sidebar-desktop-width-v2"].value?e["article-left-sidebar-desktop-width-v2"].value:20),this.isRightPanelActive()&&(s=i["article-right-sidebar-desktop-width-v2"].value?i["article-right-sidebar-desktop-width-v2"].value:20),t=100-n-s,this.currentSettings.left_sidebar.settings["article-left-sidebar-desktop-width-v2"].value=n,this.currentSettings.right_sidebar.settings["article-right-sidebar-desktop-width-v2"].value=s,this.currentSettings.article_content.settings["article-content-desktop-width-v2"].value=t,this.styles.append(`\n\t\t\t\t\t\t#eckb-article-page-container-v2 #eckb-article-body {\n\t\t\t\t\t\t\tgrid-template-columns: ${n}% ${t}% ${s}%!important;\n\t\t\t\t\t\t}\n\t\t\t\t\t`)}},updateAttributes:function(){for(let t in this.currentSettings)for(let e in this.currentSettings[t].settings){let i=this.currentSettings[t].settings[e];if(void 0===i.target_attr)continue;if("string"==typeof i.toggler){if("off"==this.getOption(i.toggler))continue}else if("object"==typeof i.toggler){let t=!0;for(let e in i.toggler){this.getOption(e)!==i.toggler[e]&&(t=!1)}if(!t)continue}let n=i.target_attr.split("|");for(let t of n)this.iframe.find(i.target_selector).prop(t,i.value)}},updateText:function(){for(let t in this.currentSettings)for(let e in this.currentSettings[t].settings){let i=this.currentSettings[t].settings[e];if("string"==typeof i.toggler){if("off"==this.getOption(i.toggler))continue}else if("object"==typeof i.toggler){let t=!0;for(let e in i.toggler){this.getOption(e)!==i.toggler[e]&&(t=!1)}if(!t)continue}void 0!==i.text&&this.iframe.find(i.target_selector).text(this.decodeHtml(i.value)),void 0!==i.html&&this.iframe.find(i.target_selector).html(i.value)}},checkTogglers:function(){if(""!=this.activeZone&&void 0!==this.currentSettings[this.activeZone])for(let e in this.currentSettings[this.activeZone].settings){let i=this.currentSettings[this.activeZone].settings[e];if(void 0===i.toggler)continue;let n=!1;if("string"==typeof i.toggler&&(n="on"==this.getOption(i.toggler)),"object"==typeof i.toggler){n=!0;for(let t in i.toggler){let e=this.getOption(t);"!"==i.toggler[t][0]?e==i.toggler[t].substring(1)&&(n=!1):e!==i.toggler[t]&&(n=!1)}}n?(t("[data-field="+e+"]").show(),t("[data-separator="+e+"]").show()):(t("[data-field="+e+"]").hide(),t("[data-separator="+e+"]").hide())}},refreshIframe:function(e){e.showLoader(),0==e.iframe.find("#epkb-settings-form").length&&e.iframe.find("body").append(`\n\t\t\t\t\t<form id="epkb-settings-form" method="post">\n\t\t\t\t\t\t<input type="hidden" name="epkb-editor-settings">\n\t\t\t\t\t\t<input type="hidden" name="epkb-editor-page-loaded" value="1">\n\t\t\t\t\t\t<input type="hidden" name="epkb-editor-kb-id" value="${epkb_editor.epkb_editor_kb_id}">\n\t\t\t\t\t\t<input type="hidden" name="epkb-editor-preset" value="">\n\t\t\t\t\t</form>\n\t\t\t\t`);let i=Object.assign({},e.currentSettings,e.currentEditorSettings);for(let t in i)for(let e in i[t].settings)delete i[t].settings[e].element_wrapper;delete i.themes,e.activeZone&&(e.preselectZone=e.activeZone,e.preselectEq=0,void 0!==e.currentSettings[e.preselectZone]&&e.iframe.find(e.currentSettings[e.preselectZone].classes).each(function(){if(t(this).hasClass("epkb-editor-zone--active"))return!1;e.preselectEq++})),e.currentPreset?e.iframe.find("#epkb-settings-form input[name=epkb-editor-preset]").val(JSON.stringify(e.currentPreset)):e.iframe.find("#epkb-settings-form input[name=epkb-editor-preset]").val(JSON.stringify([])),e.iframeScroll=e.iframe.scrollTop(),"global"!==t(".epkb-editor-settings__panel-navigation__tab--active").data("target")&&(e.activeTab=t(".epkb-editor-settings__panel-navigation__tab--active").data("target")),e.iframe.find("#epkb-settings-form input[name=epkb-editor-settings]").val(JSON.stringify(i)),e.iframe.find("#epkb-settings-form").trigger("submit")},refreshPanel:function(){let e=t(".epkb-editor-settings__panel-navigation__tab--active").data("target"),i=t(".epkb-editor-settings__panel-content-container").scrollTop();this.onZoneClick(),t("#epkb-editor-settings-tab-"+e).trigger("click"),t(".epkb-editor-settings__panel-content-container").scrollTop(i)},activateColorPickers:function(){t("#epkb-editor").find(".epkb-editor-settings-control-type-color input").length&&"function"==typeof t("#epkb-editor").find(".epkb-editor-settings-control-type-color input").epkbColorPicker&&t("#epkb-editor").find(".epkb-editor-settings-control-type-color input").epkbColorPicker({change:function(e,i){setTimeout(function(){t(e.target).trigger("change")},50)},clear:function(e,i){let n=t(e.target).closest(".epkb-editor-settings-control__input").find(".epkb-picker-input-wrap label input[type=text]");n.length<1||void 0!==n.data("default_color")&&n.iris("color",n.data("default_color"))}})},activateSliders:function(){t(".epkb-editor-settings-control-type-number--slider .epkb-editor-settings-control__slider").each(function(){let e=t(this).closest(".epkb-editor-settings-control-container").find("input"),i=t(this);i.slider({max:parseFloat(e.prop("max")),min:parseFloat(e.prop("min")),value:parseFloat(e.val()),change:function(t,i){e.val(i.value),e.trigger("change",["updateSlider"])}}),e.on("change",function(e,n){if("updateSlider"==n)return!0;i.slider("option","value",parseFloat(t(this).val()))})})},loadThemes:function(){let e=this;if(0==t("[name=theme_presets]").length||void 0!==e.theme_presets)return;let i={action:"eckb_editor_get_themes_list",epkb_editor_kb_id:epkb_editor.epkb_editor_kb_id,_wpnonce_apply_editor_changes:epkb_editor._wpnonce_apply_editor_changes};t.ajax({type:"POST",dataType:"json",data:i,url:epkb_editor.ajaxurl,beforeSend:function(e){t("[name=theme_presets]").prop("disabled","disabled"),t("[name=search_presets]").prop("disabled","disabled"),t("[name=categories_presets]").prop("disabled","disabled")}}).done(function(t){e.theme_presets=t.data.theme_presets,e.search_presets=t.data.search_presets,e.categories_presets=t.data.categories_presets}).fail(function(t,i,n){let s=n||"unknown error";e.showMessage({text:s,type:"error"})}).always(function(){t("[name=theme_presets]").prop("disabled",!1),t("[name=search_presets]").prop("disabled",!1),t("[name=categories_presets]").prop("disabled",!1)})},toggleMode:function(e){let i=e.data;if(t("body").hasClass("epkb-edit-mode")){let t,e=location.href.split("?")[0],i=[],s=-1!==location.href.indexOf("?")?location.href.split("?")[1]:"";if(""!==s){for(var n=(i=s.split("&")).length-1;n>=0;n-=1)"preopen"===(t=i[n].split("=")[0])&&i.splice(n,1),"action"===t&&i.splice(n,1);e=e+"?"+i.join("&")}location.href==e?location.reload():location.href=e}else t("body").addClass("epkb-edit-mode"),i.showModal()},showModal:function(){t("body").addClass("epkb-editor--active"),t("#epkb-editor-iframe").show()},hideModal:function(){t("body").removeClass("epkb-editor--active")},showLoader:function(){t(".epkb-frontend-loader").addClass("epkb-frontend-loader--active")},removeLoader:function(){setTimeout(function(){t(".epkb-frontend-loader").removeClass("epkb-frontend-loader--active")},200)},showMessage:function(e={}){let i="";i=void 0===e.html?EPKBEditorTemplates.message(e):e.html,t("body>.eckb-bottom-notice-message").remove(),t("body").append(i),t("body").addClass("epkb-showing-message"),void 0===e.timeout&&(e.timeout=6e4),setTimeout(function(){t("body>.eckb-bottom-notice-message").remove(),t("body").removeClass("epkb-showing-message")},e.timeout)},decodeHtml:function(t){var e=document.createElement("textarea");return e.innerHTML=t,e.value},saveSettings:function(e){e.preventDefault();let i=e.data,n={},s=Object.assign({},i.currentSettings,i.currentEditorSettings);delete s.themes;for(let t in s){let e=s[t].settings;for(let t in e){let i=e[t];if(void 0===i.group_type)n[t]=i.value;else for(let t in i.subfields)n[t]=i.subfields[t].value}}let o={action:"eckb_apply_editor_changes",_wpnonce_apply_editor_changes:epkb_editor._wpnonce_apply_editor_changes,kb_config:n,epkb_editor_kb_id:epkb_editor.epkb_editor_kb_id,page_type:epkb_editor.page_type,current_url:location.href};t.ajax({type:"POST",dataType:"json",data:o,url:epkb_editor.ajaxurl,beforeSend:function(t){i.showLoader()}}).done(function(t){void 0===t.error?i.showMessage({text:t.message}):i.showMessage({html:t.message,type:"error"})}).fail(function(t,e,n){let s=n||"unknown error";i.showMessage({text:s,type:"error"})}).always(function(){i.removeLoader()})},showMenu:function(e){let i=e.data;e.stopPropagation(),t("body").trigger("click.epkbcolorpicker"),i.clearModal(),t(".epkb-editor-header__inner__title").html(epkb_editor.epkb_name),t(".epkb-editor-settings__panel-navigation-container, .epkb-editor-settings__panel-content-container").hide(),t(".epkb-editor-settings-menu-container").show(),i.showBackButtons(),i.activeZone="menu"},showSettings:function(e){e.stopPropagation(),t("body").trigger("click.epkbcolorpicker");let i=e.data;i.clearModal(),t(".epkb-editor-header__inner__title").html(epkb_editor.epkb_name),t(".epkb-editor-settings__panel-navigation-container").append(EPKBEditorTemplates.modalTabsHeaderSettings()),t("#epkb-editor-settings-panel-content").removeClass("epkb-editor-settings__panel--active"),t("#epkb-editor-settings-panel-global").addClass("epkb-editor-settings__panel--active"),t("#epkb-editor-settings-panel-global").append(epkb_editor.settings_html),t(".epkb-editor-settings-control-image-select input[value="+epkb_editor_settings.settings_zone.settings.templates_for_kb.value+"]").prop("checked","checked"),t(".epkb-editor-settings-control-image-select input[value="+epkb_editor_settings.settings_zone.settings.kb_main_page_layout.value+"]").prop("checked","checked"),t(".epkb-editor-settings-panel-global__links-container").append(("main-page"==epkb_editor.page_type?EPKBEditorTemplates.menuLinks("#","templates","sliders",epkb_editor.theme_link):"")+("main-page"==epkb_editor.page_type?EPKBEditorTemplates.menuLinks("#","layouts","sitemap",epkb_editor.layouts_link):"")+EPKBEditorTemplates.menuLinks(epkb_editor.kb_url+"&page=epkb-kb-configuration&wizard-global","urls","globe",epkb_editor.urls_and_slug)+EPKBEditorTemplates.menuLinks(epkb_editor.kb_url+"&page=epkb-kb-configuration&wizard-ordering","ordering","object-group",epkb_editor.order_categories_and_articles)+EPKBEditorTemplates.menuLinks(epkb_editor.kb_url+"&page=epkb-manage-kb","manage_kb","pencil-square-o",epkb_editor.rename_kb));for(let e in i.currentEditorSettings.settings_zone.settings){let n=i.currentEditorSettings.settings_zone.settings[e];n.element_wrapper=t("#epkb-editor-settings-panel-global"),i.addField(e,n)}i.showBackButtons(),i.activeZone="settings"},getOption:function(t){for(let e in this.currentSettings)for(let i in this.currentSettings[e].settings){let n=this.currentSettings[e].settings[i];if(t==i)return n.value;if("dimensions"==n.group_type||"multiple"==n.group_type){if(void 0===n.subfields[t])continue;return n.subfields[t].value}}for(let e in this.currentEditorSettings)for(let i in this.currentEditorSettings[e].settings){let n=this.currentEditorSettings[e].settings[i];if(t==i)return n.value}return!1},updateOption:function(t,e){for(let i in this.currentSettings)for(let n in this.currentSettings[i].settings){let s=this.currentSettings[i].settings[n];if(t==n&&(this.currentSettings[i].settings[n].value=e),"dimensions"==s.group_type||"multiple"==s.group_type){if(void 0===s.subfields[t])continue;this.currentSettings[i].settings[n].subfields[t].value=e}}for(let i in this.currentEditorSettings.settings_zone.settings)t==i&&(this.currentEditorSettings.settings_zone.settings[i].value=e)},getOptionsList:function(t){for(let e in this.currentSettings)for(let i in this.currentSettings[e].settings){let n=this.currentSettings[e].settings[i];if(t==i&&"checkbox"==n.type)return["on","off"];if(t==i&&("select"==n.type||"preset"==n.type))return Object.keys(n.options);if("multiple"==n.group_type){if(void 0===n.subfields[t])continue;if("checkbox"==n.subfields[t].type)return["on","off"];if("select"==n.subfields[t].type||"preset"==n.subfields[t].type)return Object.keys(n.subfields[t].options)}}return[]},isLeftPanelActive:function(){return this.iframe.find("#eckb-article-left-sidebar div").length&&this.iframe.find("#eckb-article-left-sidebar").width()||"on"==this.getOption("article-left-sidebar-toggle")},isRightPanelActive:function(){return this.iframe.find("#eckb-article-right-sidebar div").length&&this.iframe.find("#eckb-article-right-sidebar").width()||"on"==this.getOption("article-right-sidebar-toggle")},getPostfix:function(t){if(void 0===t||""==t)return"";let e=this.getOption(t);return!1===e?t:e},errorHandler:function(e,i,n,s,o){if(0==this.loadingIframe)return;let a="",r="";if(~e.indexOf("cross-origin")){let t=new URL(location.href),e=t.searchParams.get("epkb_csp_on");if(void 0===e||!e)return t.searchParams.set("epkb_csp_on","1"),void(location.href=t);a=epkb_editor.csr_error,r="Cross-Origin error"}else{if("timeout1"==e)return void this.showMessage({html:t("#epkb-editor-error-message-timeout-1").html(),type:"error"});"timeout2"==e?(a=epkb_editor.timeout2_error,r="Timeout error"):(a=epkb_editor.other_error_found,r=e+" At "+i+" line: "+n+":"+s)}t("#epkb-editor-error-message-timeout-2").length&&(this.showMessage({html:t("#epkb-editor-error-message-timeout-2").html(),type:"error",timeout:6e5}),t("#epkb-editor-error-message-timeout-2").remove(),window.epkbErrorsList=[]),t(".epkb-editor-error--form-message-1").html(a),t("textarea.editor_error").text(r);let l=this;l.clearErrorTimeouts(),setTimeout(function(){l.removeLoader(),t("body").removeClass("epkb-editor--active"),t("body").removeClass("epkb-edit-mode")},100)},clearErrorTimeouts:function(){void 0!==this.loadingIframe&&this.loadingIframe&&clearTimeout(this.loadingIframe),void 0!==this.longLoadingIframe&&this.longLoadingIframe&&clearTimeout(this.longLoadingIframe),setTimeout(function(){this.loadingIframe=!1},100)},sendErrorMessage:function(e){e.preventDefault();let i=t(this),n=e.data;t.ajax({type:"POST",dataType:"json",url:epkb_editor.ajaxurl,data:i.serialize(),beforeSend:function(e){t("#epkb-editor-error--form input, #epkb-editor-error--form textarea").prop("disabled","disabled"),t(".epkb-editor-error--form-response").html(epkb_editor.sending_error_report)}}).done(function(e){void 0!==e.success&&0==e.success?t(".epkb-editor-error--form-response").html(e.data):void 0!==e.success&&1==e.success?t(".epkb-editor-error--form-response").html(e.data):t(".epkb-editor-error--form-response").html(epkb_editor.send_report_error)}).fail(function(e,i,n){t(".epkb-editor-error--form-response").html(epkb_editor.send_report_error)}).always(function(){t("#epkb-editor-error--form input, #epkb-editor-error--form textarea").prop("disabled",!1),setTimeout(function(){n.toggleMode(e)},4e3)})},showNavigation:function(e=!1){let i=this;t("body").trigger("click.epkbcolorpicker"),i.clearModal(),t(".epkb-editor-header__inner__title").html(epkb_editor.navigation),t(".epkb-editor-settings__panel-navigation-container").append(EPKBEditorTemplates.navigatorTabsHeaderSettings()),t("#epkb-editor-settings-panel-content").removeClass("epkb-editor-settings__panel--active"),e?(t("#epkb-editor-settings-panel-hidden").addClass("epkb-editor-settings__panel--active"),t("#epkb-editor-settings-tab-hidden").addClass("epkb-editor-settings__panel-navigation__tab--active"),t("#epkb-editor-settings-tab-navigator-enabled").removeClass("epkb-editor-settings__panel-navigation__tab--active")):t("#epkb-editor-settings-panel-navigator-enabled").addClass("epkb-editor-settings__panel--active"),t("#epkb-editor-settings-panel-navigator-enabled").append(EPKBEditorTemplates.navigation(i.getNavigation()));let n=0;for(let t in i.currentSettings){if(void 0===i.currentSettings[t].disabled_settings)continue;let e=i.currentSettings[t],s=!1;for(let t in e.disabled_settings){i.getOption(t)!=e.disabled_settings[t]&&(s=!0)}"toc"==t&&(s=!1,i.isLeftPanelActive()&&parseInt(i.getOption("toc_left"))&&(s=!0),i.isRightPanelActive()&&parseInt(i.getOption("toc_right"))&&(s=!0),parseInt(i.getOption("toc_content"))&&(s=!0)),"metadata_footer"==t&&1==s&&i.iframe.find('.eckb-article-content-footer__article-meta [class*="article-meta"]').length<1&&(s=!1),"elay_sidebar_navigation_zone"==t&&1==s&&"off"==i.getOption("article-left-sidebar-toggle")&&(s=!1),s||(i.addCheckbox(t,{label:"article_content"==t?epkb_editor.article_header_rows:e.title,value:"off",editor_tab:"hidden"}),n++)}n?n>1&&t("#epkb-editor-settings-tab-hidden .epkb-editor-settings__panel-navigation__tab__icon").append(`\n\t\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__counter">${n}</span>\n\t\t\t\t\t`):i.addHeader("",{content:epkb_editor.all_zones_active,editor_tab:"hidden"}),i.showBackButtons(),i.activeZone="navigation",t("#epkb-editor-show-navigation").addClass("epkb-editor-show-navigation--active"),t(".epkb-editor-container").addClass("epkb-editor-container--navigator")},getNavigation:function(){let e=this,i=[];return this.iframe.find(".epkb-editor-zone").each(function(){let n=t(this);if(n.parents(".epkb-editor-zone").length)return!0;i.push({name:n.data("zone"),children:e.searchZones(t(this),0,e)})}),e.zonesList(i,e)},searchZones:function(e,i,n){let s=[];if(void 0===e)return s;if(i>100)return s;let o=e.find(".epkb-editor-zone");return o.length?(i++,o.each(function(){if(0==t(this).parents(".epkb-editor-zone").length)return!0;if(t(this).parents(".epkb-editor-zone").get(0)!==e.get(0))return!0;let o=!1,a=t(this).data("zone");if(s.forEach(function(t,e){t.name==a&&(o=e)}),!1===o)s.push({name:a,children:n.searchZones(t(this),i,n)});else{let e=n.searchZones(t(this),i,n);e.length&&s[o].children.push(e)}}),s):s},zonesList:function(t,e){let i="<ul>";return t.forEach(function(t){if(void 0===e.currentSettings[t.name]||!e.iframe.find(e.currentSettings[t.name].classes).is(":visible")&&("search_button_zone"==t.name||"article_search_button_zone"==t.name))return!0;i+=`<li><a href="#" data-target="${e.currentSettings[t.name].classes}" class="epkb-editor-navigation__link" data-zone="${t.name}"><span class="epkb-editor-navigation__link__title">${e.currentSettings[t.name].title}</span> <span class="epkb-editor-navigation__link__help">(${epkb_editor.edit_zone})</span></a>`,void 0!==t.children&&t.children.length>0&&(i+=e.zonesList(t.children,e)),i+="</li>"}),i+="</ul>"}},window.EPKBEditorTemplates={divider:function(){return'<div class="epkb-editor-settings-separator"></div>'},select:function(t){let e="";if(void 0!==(t=Object.assign({name:"",label:"",value:"",style:"",separator_above:"",info_url:"",description:""},t)).separator_above&&"yes"===t.separator_above&&(e+=` <div class="epkb-editor-settings-control-separator" data-separator="${t.name}"></div>`),void 0===t.style&&(t.style="full"),"prev-next"==t.style){let i="";e+=`\n\t\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-select epkb-editor-settings-control-type-select--${t.style}" data-field="${t.name}">\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t\t<select name="${t.name}" value="${t.value}" style="display:none;">`;for(let n in t.options)if("string"==typeof t.options[n])e+=`\n\t\t\t\t\t\t\t<option value="${n}" ${t.value==n?'selected="selected"':""}>${t.options[n]}</option>\n\t\t\t\t\t\t`,t.value==n&&(i=t.options[n]);else for(let s in t.options[n])e+=`\n\t\t\t\t\t\t\t\t<option value="${s}" ${t.value==s?'selected="selected"':""}>${t.options[n][s]}</option>\n\t\t\t\t\t\t\t`,t.value==n&&(i=t.options[n]);return e+=`\n\t\t\t\t\t</select>\n\t\t\t\t\t<div class="epkb-editor-settings-control-type-select--buttons epkb-editor-settings-control__input">\n\t\t\t\t\t\t<div class="epkb-editor-settings-control-type-select--prev-button"><span class="epkbfa epkbfa-chevron-left"></span></div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control-type-select--label">${i}</div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control-type-select--next-button"><span class="epkbfa epkbfa-chevron-right"></span></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t\t`}e+=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-select epkb-editor-settings-control-type-select--${t.style}" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<select name="${t.name}" value="${t.value}">\n\t\t\t`;for(let i in t.options)if("string"==typeof t.options[i])e+=`\n\t\t\t\t\t\t\t\t<option value="${i}" ${t.value==i?'selected="selected"':""}>${t.options[i]}</option>\n\t\t\t\t\t`;else{e+=`<optgroup label="${i}">`;for(let n in t.options[i])e+=`\n\t\t\t\t\t\t\t\t\t<option value="${n}" ${t.value==n?'selected="selected"':""}>${t.options[i][n]}</option>\n\t\t\t\t\t\t`;e+="</optgroup>"}return e+=`\n\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},units:function(t){let e="";e+=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-units" data-field="${(t=Object.assign({name:"",value:"",options:[]},t)).name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t`;for(let i in t.options)e+=`\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t<input type="radio" name="${t.name}" value="${i}" ${t.value==i?'checked="checked"':""}>\n\t\t\t\t\t\t\t\t<span>${t.options[i]}</span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t`;return e+="\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t"},checkbox:function(t){let e="";return void 0!==(t=Object.assign({name:"",label:"",value:"",separator_above:"",info_url:"",description:""},t)).separator_above&&"yes"===t.separator_above&&(e+=` <div class="epkb-editor-settings-control-separator" data-separator="${t.name}"></div>`),e+=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-toggle" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<label class="epkb-editor-settings-control-toggle">\n\t\t\t\t\t\t\t\t<input type="checkbox" class="epkb-editor-settings-control__input__toggle" value="yes" name="${t.name}" ${"on"==t.value?'checked="checked"':""}>\n\t\t\t\t\t\t\t\t<span class="epkb-editor-settings-control__input__label" data-on="${epkb_editor.checkbox_on}" data-off="${epkb_editor.checkbox_off}"></span>\n\t\t\t\t\t\t\t\t<span class="epkb-editor-settings-control__input__handle"></span>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},text:function(t){let e="";return void 0===(t=Object.assign({name:"",label:"",value:"",style:"",info_url:"",description:"",separator_above:"",html:!1},t)).style&&(t.style="full"),void 0!==t.separator_above&&"yes"===t.separator_above&&(e+=` <div class="epkb-editor-settings-control-separator" data-separator="${t.name}"></div>`),t.html?e+=`\n\t\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-text epkb-control-text--${t.style}" data-field="${t.name}">\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t\t<textarea name="${t.name}">${t.value}</textarea>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t\t</div>\n\t\t\t\t`:e+=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-text epkb-control-text--${t.style}" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<input type="text" name="${t.name}" value="${t.value}" >\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},dimensions:function(t){if(t=Object.assign({label:"",units:"",name:"",info_url:"",description:"",subfields:{}},t),Object.keys(t.subfields).length<1)return this.notice({title:epkb_editor.wrong_dimensions});let e,i=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-dimensions epkb-editor-settings-control-type-dimensions--count-${Object.keys(t.subfields).length}" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__header">\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__header__label">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__header__units">${t.units}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="epkb-editor-settings-control__fields">\n\t\t\t`,n=!0;for(let i in t.subfields)void 0===e&&(e=t.subfields[i].value),e!==t.subfields[i].value&&(n=!1);for(let e in t.subfields)i+=`\n\t\t\t\t\t<div class="epkb-editor-settings-control__input ${n?"epkb-editor-settings-control__input__linking--active":""}">\n\t\t\t\t\t\t<input type="number" name="${e}" value="${t.subfields[e].value}" data-parentGroup="${t.name}">\n\t\t\t\t\t\t<span class="epkb-editor-settings-control__input__label">${t.subfields[e].label}</span>\n\t\t\t\t\t</div>\n\t\t\t\t`;return i+=` \n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<button class="epkb-editor-settings-control__input__linking"><span class="epkbfa epkbfa-link" aria-hidden="true"></span></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},number:function(t){let e="";return void 0!==(t=Object.assign({name:"",label:"",value:"",style:"",min:0,max:100,separator_above:"",info_url:"",description:""},t)).separator_above&&"yes"===t.separator_above&&(e+=` <div class="epkb-editor-settings-control-separator" data-separator="${t.name}"></div>`),void 0===t.style&&(t.style="default"),e+=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-number epkb-editor-settings-control-type-number--${t.style}" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<input type="number" name="${t.name}" value="${t.value}" min="${t.min}" max="${t.max}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="epkb-editor-settings-control__slider"></div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},header:function(t){return t=Object.assign({content:"",name:""},t),`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-header" data-field="${t.name}">\n\t\t\t\t\t${t.content}\n\t\t\t\t</div>\n\t\t\t`},header_desc:function(t){return t=Object.assign({title:"",desc:""},t),`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-header-desc" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control-type-header-desc__title">${t.title}</div>\n\t\t\t\t\t<div class="epkb-editor-settings-control-type-header-desc__desc">${t.desc}</div>\n\t\t\t\t</div>\n\t\t\t`},colorPicker:function(t){let e="";return void 0!==(t=Object.assign({name:"",label:"",value:"",separator_above:"",info_url:"",description:""},t)).separator_above&&"yes"===t.separator_above&&(e+=` <div class="epkb-editor-settings-control-separator" data-separator="${t.name}"></div>`),e+=`\n\t\t\t\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-color" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<input type="text" name="${t.name}" value="${t.value}" data-default_color="${t.value}">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},wpEditor:function(t){return t=Object.assign({name:"",label:"",value:"",info_url:"",description:""},t),`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-wp-editor" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label} ${t.info_url?'<a class="epkb-editor-settings-control__info" href="'+t.info_url+'" target="_blank"><span class="epkbfa epkbfa-info-circle"></span><span class="info-tooltip">Click to read more about this feature</span></a>':""}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<textarea style="display: none;" name="${t.name}">\n\t\t\t\t\t\t\t\t${t.value}\n\t\t\t\t\t\t\t</textarea>\n\t\t\t\t\t\t\t<button class="epkb-editor-settings-wpeditor_button">${epkb_editor.edit_button}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${t.description?'<div class="epkb-editor-settings-control__description">'+t.description+"</div>":""}\n\t\t\t\t</div>\n\t\t\t`},rawHtml:function(t){return t=Object.assign({content:"",name:""},t),`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-raw-html" data-field="${t.name}">\n\t\t\t\t\t${t.content}\n\t\t\t\t</div>\n\t\t\t`},typography:function(t){(t=Object.assign({value:{},name:""},t)).value=Object.assign(epkb_editor.typography_defaults,t.value);let e=`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-typography" data-field="${t.name}">\n\t\t\t\t\t<div class="epkb-editor-settings-control__field">\n\t\t\t\t\t\t<label class="epkb-editor-settings-control__title">${t.label}</label>\n\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t<button class="epkb-editor-settings-typography_button ep_font_icon_pencil"></button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-typography_form">\n\t\t\t\t`;return e+=`<div class="epkb-editor-settings-typography_field">\n\t\t\t\t\t\t\t\t\t<label>${epkb_editor.typography_font_family}</label>\n\t\t\t\t\t\t\t\t\t<select name="${t.name}" data-typography="font-family">`,""==t.value["font-family"]?e+=`<option value="" selected=selected">${epkb_editor.default}</option>`:e+=`<option value="">${epkb_editor.default}</option>`,epkb_editor.typography_fonts.forEach(function(i){t.value["font-family"]==i?e+=`<option value="${i}" selected=selected" style="font-family:${i};">${i}</option>`:e+=`<option value="${i}" style="font-family:${i};">${i}</option>`}),e+=`</select>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-typography_field">\n\t\t\t\t\t\t\t<label>${epkb_editor.typography_font_size}</label>\n\t\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t\t<input type="number" name="${t.name}" value="${t.value["font-size"]}" min="1" max="100"  data-typography="font-size" placeholder="${epkb_editor.default}">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="epkb-editor-settings-typography_field">\n\t\t\t\t\t\t\t<label>${epkb_editor.typography_font_weight}</label>\n\t\t\t\t\t\t\t<div class="epkb-editor-settings-control__input">\n\t\t\t\t\t\t\t\t<select name="${t.name}" data-typography="font-weight">\n\t\t\t\t\t\t\t\t\t<option value="" ${""==t.value["font-weight"]?'selected="selected"':""}>${epkb_editor.default}</option>\n\t\t\t\t\t\t\t\t\t<option value="100" ${100==t.value["font-weight"]?'selected="selected"':""}>100</option>\n\t\t\t\t\t\t\t\t\t<option value="200" ${200==t.value["font-weight"]?'selected="selected"':""}>200</option>\n\t\t\t\t\t\t\t\t\t<option value="300" ${300==t.value["font-weight"]?'selected="selected"':""}>300</option>\n\t\t\t\t\t\t\t\t\t<option value="400" ${400==t.value["font-weight"]?'selected="selected"':""}>400</option>\n\t\t\t\t\t\t\t\t\t<option value="500" ${500==t.value["font-weight"]?'selected="selected"':""}>500</option>\n\t\t\t\t\t\t\t\t\t<option value="600" ${600==t.value["font-weight"]?'selected="selected"':""}>600</option>\n\t\t\t\t\t\t\t\t\t<option value="700" ${700==t.value["font-weight"]?'selected="selected"':""}>700</option>\n\t\t\t\t\t\t\t\t\t<option value="800" ${800==t.value["font-weight"]?'selected="selected"':""}>800</option>\n\t\t\t\t\t\t\t\t\t<option value="900" ${900==t.value["font-weight"]?'selected="selected"':""}>900</option>\n\t\t\t\t\t\t\t\t</select>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input type="hidden" name="${t.name}" value="${t.value["font-size-units"]}"  data-typography="font-size-units">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t`},modalHeader:function(){return`\n\t\t\t\t\x3c!-- Header Container --\x3e\n\t\t\t\t\t<header class="epkb-editor-header-container">\n\t\t\t\t\t\t<div class="epkb-editor-header__inner">\n\t\t\t\t\t\t\t<div class="epkb-editor-header__inner__menu-btn"><span class="epkbfa epkbfa-bars"></span></div>\n\t\t\t\t\t\t\t<div class="epkb-editor-header__inner__back-btn"><span class="epkbfa epkbfa-chevron-left"></span></div>\n\t\t\t\t\t\t\t<div class="epkb-editor-header__inner__title">${epkb_editor.epkb_name}</div>\n\t\t\t\t\t\t\t<div class="epkb-editor-header__inner__config"><span class="epkbfa epkbfa-cog"></span></div>\n\t\t\t\t\t\t\t<div class="epkb-editor-header__inner__close-btn"><span class="epkbfa epkbfa-times"></span></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</header>\n\t\t\t\t\x3c!-- /Header Container --\x3e`},modalTabsHeader:function(t=[]){if(0==t.length)return"";let e,i="",n=!0;return~t.indexOf("content")&&n?(e="epkb-editor-settings__panel-navigation__tab--active",n=!1):e=~t.indexOf("content")?"":"epkb-editor-settings__panel-navigation__tab--disabled",i+=`\n\t\t\t\t<div id="epkb-editor-settings-tab-content"  class="epkb-editor-settings__panel-navigation__tab  ${e}" data-target="content">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-pencil"></span></span>\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_content}</span>\n\t\t\t\t</div>`,~t.indexOf("style")&&n?(e="epkb-editor-settings__panel-navigation__tab--active",n=!1):e=~t.indexOf("style")?"":"epkb-editor-settings__panel-navigation__tab--disabled",i+=`\n\t\t\t\t<div id="epkb-editor-settings-tab-style"  class="epkb-editor-settings__panel-navigation__tab ${e}" data-target="style">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-adjust"></span></span>\t\t\t\t\t\t\n          <span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_style}</span>\n\t\t\t\t</div>\n\t\t\t`,~t.indexOf("features")&&n?(e="epkb-editor-settings__panel-navigation__tab--active",n=!1):e=~t.indexOf("features")?"":"epkb-editor-settings__panel-navigation__tab--disabled",i+=`\n\t\t\t\t<div id="epkb-editor-settings-tab-features"  class="epkb-editor-settings__panel-navigation__tab ${e}" data-target="features">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-puzzle-piece"></span></span>\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_features}</span>\n\t\t\t\t</div>\n\t\t\t`,~t.indexOf("advanced")&&n?(e="epkb-editor-settings__panel-navigation__tab--active",n=!1):e=~t.indexOf("advanced")?"":"epkb-editor-settings__panel-navigation__tab--disabled",i+=`\n\t\t\t\t<div id="epkb-editor-settings-tab-advanced"  class="epkb-editor-settings__panel-navigation__tab ${e}" data-target="advanced">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-cogs"></span></span>\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_advanced}</span>\n\t\t\t\t</div>`},modalTabsHeaderSettings:function(){return`\n\t\t\t\t<div id="epkb-editor-settings-tab-global"  class="epkb-editor-settings__panel-navigation__tab epkb-editor-settings__panel-navigation__tab--active" data-target="global">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-globe"></span></span>\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_global}</span>\n\t\t\t\t</div>\n\t\t\t`},navigatorTabsHeaderSettings:function(){return`\n\t\t\t\t<div id="epkb-editor-settings-tab-navigator-enabled"  class="epkb-editor-settings__panel-navigation__tab epkb-editor-settings__panel-navigation__tab--active" data-target="navigator-enabled">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-map-marker"></span></span>\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.enabled_list}</span>\n\t\t\t\t</div>\n\t\t\t\t<div id="epkb-editor-settings-tab-hidden"  class="epkb-editor-settings__panel-navigation__tab" data-target="hidden">\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__icon"><span class="epkbfa epkbfa-eye-slash"></span></span>\t\t\t\t\t\t\n\t\t\t\t\t<span class="epkb-editor-settings__panel-navigation__tab__title">${epkb_editor.tab_hidden}</span>\n\t\t\t\t</div>\n\t\t\t`},modalTabsBody:function(t=[]){return`\n\t\t\t\t<div id="epkb-editor-settings-panel-content" class="epkb-editor-settings__panel epkb-editor-settings__panel--active" data-panel="content"></div>\n\t\t\t\t<div id="epkb-editor-settings-panel-style" class="epkb-editor-settings__panel" data-panel="style"></div>\n\t\t\t\t<div id="epkb-editor-settings-panel-features" class="epkb-editor-settings__panel" data-panel="features"></div>\n\t\t\t\t<div id="epkb-editor-settings-panel-advanced" class="epkb-editor-settings__panel" data-panel="advanced"></div>\n\t\t\t\t<div id="epkb-editor-settings-panel-global" class="epkb-editor-settings__panel" data-panel="global">\n\t\t\t\t\t<div class="epkb-editor-settings-panel-global__links-container"></div>\n\t\t\t\t\t<div class="epkb-editor-settings-panel-global__settings-container"></div>\n\t\t\t\t\n\t\t\t\t</div>\n\t\t\t\t<div id="epkb-editor-settings-panel-navigator-enabled" class="epkb-editor-settings__panel" data-panel="navigator-enabled"></div>\n\t\t\t\t<div id="epkb-editor-settings-panel-hidden" class="epkb-editor-settings__panel" data-panel="hidden"></div>\n\t\t\t\t\n\t\t\t\t<div class="epkb-editor-settings__help">\n\t\t\t\t\t<a href="https://www.echoknowledgebase.com/front-end-editor-support-and-questions/" target="_blank">\n\t\t\t\t\t\t<span class="">${epkb_editor.need_help}</span>\n\t\t\t\t\t\t<span class="epkbfa epkbfa-question-circle-o"></span>\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`},modalSettingsContainer:function(t={}){let e="";return e+='\n\t\t\t\t\x3c!-- Settings Container --\x3e\n\t\t\t\t<main class="epkb-editor-settings-container">\n\t\t\t\t\t<div class="epkb-editor-settings__inner">\n\t\t\t',void 0!==t.tabs&&(e+=`\n\t\t\t\t\t\x3c!-- Panel Navigation --\x3e\n\t\t\t\t\t<div class="epkb-editor-settings__panel-navigation-container">\n\t\t\t\t\t\t${this.modalTabsHeader(t.tabs)}\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /Panel Navigation --\x3e\n\t\t\t\t\t\x3c!-- Panels Content --\x3e\n\t\t\t\t\t<div class="epkb-editor-settings__panel-content-container">\n\t\t\t\t\t\t${this.modalTabsBody()}\n\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t\t\x3c!-- /Panels Content --\x3e\n\t\t\t\t\t\n\t\t\t\t\t${epkb_editor.menu_links_html}\n\t\t\t\t\t\n\t\t\t\t`),e+="\n\t\t\t\t\t</div>\n\t\t\t\t</main>\n\t\t\t\t\x3c!-- /Settings Container --\x3e\n\t\t\t"},modalFooter:function(){return`\n\t\t\t\t<footer class="epkb-editor-footer-container">\n\t\t\t\t\t<nav class="epkb-editor-footer-nav">\n\t\t\t\t\t\t<div class="epkb-editor-footer-nav__item epkb-editor-footer-nav__item-icon" style="display:none;"><span class="epkbfa epkbfa-reply-all" id="epkb-show-list"></span></div>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<div class="epkb-editor-footer-nav__item epkb-editor-footer-nav__item-btn epkb-editor-footer-nav__item-btn__navigation">\n\t\t\t\t\t\t\t<button id="epkb-editor-show-navigation" class="epkb-editor-btn epkb-editor-navigation">\n\t\t\t\t\t\t\t\t<span class="epkbfa epkbfa-map-marker"></span>\n\t\t\t\t\t\t\t\t${epkb_editor.navigation}\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="epkb-editor-footer-nav__item epkb-editor-footer-nav__item-btn">\n\t\t\t\t\t\t\t<button id="epkb-editor-exit" class="epkb-editor-btn epkb-editor-exit">${epkb_editor.exit_button}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="epkb-editor-footer-nav__item epkb-editor-footer-nav__item-btn">\n\t\t\t\t\t\t\t<button id="epkb-editor-save" class="epkb-editor-btn epkb-editor-save">${epkb_editor.save_button}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\t\t\t\t</footer>\n\t\t\t\t\n\t\t\t\t<div id="epkb-editor-close">&times;</div>\n\t\t\t`},modalWindow:function(){return`\n\t\t\t\t<div id="epkb-editor" class="epkb-editor-container">\n\t\t\t\t\t${this.modalHeader()}\n\t\t\t\t\t${this.modalSettingsContainer({tabs:[]})}\n\t\t\t\t\t${this.modalFooter()}\n\t\t\t\t</div>\n\t\t\t`},notice:function(t={}){return t=Object.assign({icon:"exclamation-triangle",title:"",message:"",style:"default"},t),`\n\t\t\t\t<div class="epkb-editor-settings-control-container epkb-editor-settings-control-type-notice epkb-editor-settings-control-type-notice--${t.style}">\n\t\t\t\t\t<div class="epkb-editor-notice__icon"><span class="epkbfa epkbfa-${t.icon}"></span></div>\n\t\t\t\t\t<div class="epkb-editor-notice__body">\n\t\t\t\t\t\t<div class="epkb-editor-notice__title">${t.title}</div>\n\t\t\t\t\t\t<div class="epkb-editor-notice__message">${t.message}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`},message:function(t={}){return void 0===t.title?t.title="":t.title="<h4>"+t.title+"</h4>",void 0===t.text&&(t.text=""),void 0===t.type&&(t.type="success"),`\n\t\t\t\t<div class="eckb-bottom-notice-message">\n\t\t\t\t\t<div class="contents">\n\t\t\t\t\t\t<span class="${t.type}">\n\t\t\t\t\t\t\t${t.title}\n\t\t\t\t\t\t\t<p>${t.text}</p>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class='epkb-close-notice epkbfa epkbfa-window-close'></div>\n\t\t\t\t</div>\n\t\t\t`},menuLinks:function(t,e,i,n){return`\n\t\t\t\t<a href="${t}" data-name="${e}" class="epkb-editor-settings-menu__group-item-container" target="_blank">\n\t\t\t\t\t<div class="epkb-editor-settings-menu__group-item__icon epkbfa epkbfa-${i}"></div>\n\t\t\t\t\t<div class="epkb-editor-settings-menu__group-item__title">${n}</div>\n\t\t\t\t</a>\n\t\t\t`},navigation:function(t){return`<div class="epkb-editor-navigation">${t}</div>`}},EPKBEditor.init()});