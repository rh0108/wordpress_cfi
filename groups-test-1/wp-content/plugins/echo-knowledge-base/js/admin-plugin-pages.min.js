jQuery(document).ready(function(e){function a(a,t){if("show"===a){let a='<div class="epkb-admin-dialog-box-loading"><div class="epkb-admin-dbl__header"><div class="epkb-admin-dbl-icon epkbfa epkbfa-hourglass-half"></div>'+(t?'<div class="epkb-admin-text">'+t+"</div>":"")+'</div></div><div class="epkb-admin-dialog-box-overlay"></div>';e("body").append(a)}else"remove"===a&&(e(".epkb-admin-dialog-box-loading").remove(),e(".epkb-admin-dialog-box-overlay").remove())}function t(e,a,t){return'<div class="eckb-top-notice-message"><div class="contents"><span class="'+t+'">'+(e?"<h4>"+e+"</h4>":"")+(a||"")+"</span></div></div>"}var i=e("#ekb-admin-page-wrap");e("#epkb-list-of-kbs").on("change",function(a){var t=e(this).find(":selected").data("kb-admin-url");t&&(window.location.href=t)}),function(){function a(a,t){i.find(a+" > .nav_tab").on("click",function(){i.find(a+" > .nav_tab").removeClass("active"),e(this).addClass("active"),i.find(t+" > .ekb-admin-page-tab-panel").removeClass("active");var o=e(this).index()+1;i.find(t+" > .ekb-admin-page-tab-panel:nth-child( "+o+" ) ").addClass("active")})}a(".add_on_container .epkb-main-nav > .epkb-admin-pages-nav-tabs","#add_on_panels"),a(".epkb-main-nav > .epkb-admin-pages-nav-tabs","#main_panels"),a("#help_tabs_nav","#help_tab_panel"),a("#new_features_tabs_nav","#new_features_tab_panel")}(),i.find("#epkb_toggle_debug").on("click",function(){e(".eckb-top-notice-message").html("");let i={action:"epkb_toggle_debug",_wpnonce_epkb_toggle_debug:e("#_wpnonce_epkb_toggle_debug").val()};var o;e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:i,beforeSend:function(e){a("show",epkb_vars.changing_debug)}}).done(function(e){(e=e||"").error||void 0===e.message?o=e.message?e.message:t("",epkb_vars.reload_try_again,"error"):window.location.href=window.location.href+"&epkb-tab=debug"}).fail(function(e,a,i){o=i?" ["+i+"]":epkb_vars.unknown_error,o=t(epkb_vars.error_occurred+". "+epkb_vars.msg_try_again,o,"error")}).always(function(){a("remove",""),o&&(e(".eckb-top-notice-message").replaceWith(o),e("html, body").animate({scrollTop:0},"slow"))})}),i.find(".featured_img").on("click",function(a){a.preventDefault(),a.stopPropagation(),i.find(".image_zoom").remove();var t,o=e(this).find("img");t=o.length>1?e(o[0]).is(":visible")?e(o[0]).attr("src"):e(o[1]).is(":visible")?e(o[1]).attr("src"):e(o[2]).attr("src"):e(this).find("img").attr("src"),e(this).after('<div id="epkb_image_zoom" class="image_zoom"><img src="'+t+'" class="image_zoom"><span class="close icon_close"></span></div>'),e("html, body").on("click.epkb",function(){e("#epkb_image_zoom").remove(),e("html, body").off("click.epkb")})}),e("#add_on_panels").on("click",".ep_font_icon_info",function(){e(this).parent().find(".ep_font_icon_info_content").toggle()}),function(){var a;e(".eckb-bottom-notice-message").length>0&&(clearTimeout(a),a=setTimeout(function(){var a=e("body").find(".eckb-bottom-notice-message");a.length&&a.addClass("fadeOutDown")},1e4))}(),e("body").find(".epkb-close-notice").on("click",function(){e(this).parent().addClass("fadeOutDown")});var o=e("#epkb-dialog-info-icon").dialog({resizable:!1,autoOpen:!1,modal:!0,buttons:{Ok:function(){e(this).dialog("close")}},close:function(){e("#epkb-dialog-info-icon-msg").html()}});i.find(".ekb-admin-page-tab-panel, .epkb-config-sidebar-options").on("click",".info-icon",function(){var a=!1,t="",i=e(this).parent().find(".label").text();i=i||"";var n=e(this).find("p").html();if(n){var c=n.split("@");n=c[0]?c[0]:epkb_vars.help_text_coming,c[1]&&(a=!0,t='<img class="epkb-help-image" src="'+c[1]+'">')}else n=epkb_vars.help_text_coming;e("#epkb-dialog-info-icon-msg").html("<p>"+n+"</p><br/>"+t),o.dialog({title:i,width:a?1e3:400,maxHeight:a?750:300,open:function(){e("#epkb-dialog-info-icon").find(".epkb-help-image").one("load",function(){o.dialog("option",{position:{my:"center",at:"center",of:window}})}),e(".ui-widget-overlay").on("click",function(){e("#epkb-dialog-info-icon").dialog("close")})}}).dialog("open")}),e("#epkb-ajax-in-progress").dialog({resizable:!1,height:70,width:200,modal:!1,autoOpen:!1}).hide(),i.on("click",".eckb-tooltip-button",function(){e(this).parent().find(".eckb-tooltip-contents").fadeToggle()});var n=e(".epkb-analytics-container");if(n.find(".page-icon").on("click",function(){n.find(".eckb-config-content").removeClass("epkb-active-content"),n.find(".eckb-nav-section").removeClass("epkb-active-nav");var a=e(this).attr("id");n.find("#"+a+"-content").addClass("epkb-active-content"),n.find(this).parents(".eckb-nav-section").addClass("epkb-active-nav")}),e("body").on("click",".eckb-wizard-accordion .eckb-wizard-option-heading",function(){var a=e(this).closest(".eckb-wizard-accordion"),t=e(this).closest(".eckb-wizard-accordion__body-content"),i=t.hasClass("eckb-wizard-accordion__body-content--active");a.find(".eckb-wizard-accordion__body-content").removeClass("eckb-wizard-accordion__body-content--active"),i||t.addClass("eckb-wizard-accordion__body-content--active")}),e("body").on("click","#eckb-wizard-main-page-preview a, .epkb-wizard-theme-panel-container a, #eckb-wizard-article-page-preview a",!1),e(".epkb-categories-icons").length){e(".epkb-categories-icons__button").on("click",function(){if(!e(this).hasClass("epkb-categories-icons__button--active")){e(".epkb-categories-icons__button").removeClass("epkb-categories-icons__button--active"),e(this).addClass("epkb-categories-icons__button--active"),e(".epkb-categories-icons__tab-body").slideUp("fast");var a=e(this).data("type");e(".epkb-categories-icons__tab-body--"+a).length&&e(".epkb-categories-icons__tab-body--"+a).slideDown("fast"),e("#epkb_head_category_icon_type").val(a)}}),e(".epkb-icon-pack__icon").on("click",function(){e(".epkb-icon-pack__icon").removeClass("epkb-icon-pack__icon--checked"),e(this).addClass("epkb-icon-pack__icon--checked"),e("#epkb_head_category_icon_name").val(e(this).data("key"))}),e(".epkb-category-image__button").on("click",function(a){a.preventDefault();var t=e(this),i=wp.media({title:t.data("title"),library:{type:"image"},multiple:!1}).on("select",function(){var a=i.state().get("selection").first().toJSON();e("#epkb_head_category_icon_image").val(a.id),e(".epkb-category-image__button").removeClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").addClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":"url("+a.url+")"})}).open()}),e("#parent").on("change",function(){var a,t,i=e(this),o=e("#epkb_head_category_template").val(),n=!1;i.find("option").each(function(){e(this).val()==i.val()&&(t=e(this))}),a="-1"==t.val()?1:t.hasClass("level-0")?2:3,"Tabs"==o?2!==a&&(n=!0):"Sidebar"==o?n=!0:a>1&&(n=!0),n?(e(".epkb-categories-icons").hide(),e(".epkb-categories-icons+.epkb-term-options-message").show()):(e(".epkb-categories-icons").show(),e(".epkb-categories-icons+.epkb-term-options-message").hide())});function c(){e("#epkb_font_icon").trigger("click"),e("#epkb_head_category_thumbnail_size").val(e("#epkb_head_category_thumbnail_size").find("option").eq(0).val()),e(".epkb-category-image__button").addClass("epkb-category-image__button--no-image"),e(".epkb-category-image__button").removeClass("epkb-category-image__button--have-image"),e(".epkb-category-image__button").css({"background-image":""}),e("#epkb_head_category_icon_image").val(0),e("div[data-key=ep_font_icon_document]").trigger("click")}e(document).ajaxComplete(function(a,t,i){if(!i)return;let o,n=i.data.split("&");for(o=0;o<n.length;o++)sParameterName=n[o].split("="),"action"===sParameterName[0]&&"add-tag"===sParameterName[1]&&(c(),e("html, body").animate({scrollTop:e(".wp-heading-inline").offset().top},300))})}e(".epkb-manage-kb-container").length&&(e(".epkb-manage-tabs__button__title").on("click",function(){let t=e(this).data("kb_id");return"undefined"==t||!t||(e(".epkb-manage-tabs__button").removeClass("active"),e(this).parent().addClass("active"),"#"==e(this).attr("href")?(e("#epkb-activate-kb").find(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active"),!1):(a("show","Loading..."),e(".epkb-manage-content").removeClass("active"),e(e(this).data("target")).addClass("active"),"#"!=this.href))}),e(".epkb-manage-content__tab-button").on("click",function(){return e(this).parent().find(".epkb-manage-content__tab-button").removeClass("active"),e(this).addClass("active"),e(this).closest(".epkb-manage-content").find("> .epkb-manage-content__tabs > .epkb-manage-content__tab").removeClass("active"),e(e(this).data("target")).addClass("active"),!1}),e(".epkb-delete-kbs .error-btn").on("click",function(){return e(this).closest(".epkb-delete-kbs").find(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active"),!1}),e(".epkb-delete-kbs .epkb-dbf__footer__accept__btn").on("click",function(){e(this).closest("form").length&&e(this).closest("form").trigger("submit")}),e("#epkb-activate-kb").find(".epkb-dbf__footer__accept__btn").on("click",function(){let a=e(".epkb-manage-tabs__button.active").find(".epkb-manage-tabs__button__title").data("kb_id");e("#epkb-activate-kb").find("input[name=emkb_kb_id]").val(a);let t=e("#epkb-activate-kb").find("form");t.attr("method","post"),t.trigger("submit")}),e(".epkb-dbf__close, .epkb-dbf__footer__cancel__btn").on("click",function(){let a=jQuery(".epkb-manage-content").data("kb_id");e(".epkb-manage-tabs__button").removeClass("active"),e('.epkb-manage-tabs__button__title[data-kb_id="'+a+'"]').parent().addClass("active")})),e(".epkb-notice-remind").on("click",function(a){a.preventDefault(),e(this).parent().parent().remove()}),e(document).on("click",".epkb-notice-dismiss",function(a){a.preventDefault(),e(".notice-"+e(this).data("notice-id")).slideUp();var t={action:"epkb_dismiss_ongoing_notice",epkb_dismiss_id:e(this).data("notice-id")};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:t})}),e(".epkb-article-structure-dialog").on("click",function(a){return a.preventDefault(),e(this).closest("#epkb-config-main-info").find(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active"),!1}),e(".epkb-dbf__close, .epkb-dialog-box-form .epkb-dbf__footer__cancel").on("click",function(){e(this).closest(".epkb-dialog-box-form").toggleClass("epkb-dialog-box-form--active")}),e(".epkb-dialog-box-form .epkb-dbf__footer__accept__btn").on("click",function(){let a=e(".epkb-dialog-box-form").find("form");a.attr("method","post"),a.trigger("submit")}),jQuery(".epkb-admin__kb-rename .epkb-edit-toggle").on("click",function(){jQuery(this).parent().parent().find(".epkb-admin__kb-rename_edit").slideToggle()})});