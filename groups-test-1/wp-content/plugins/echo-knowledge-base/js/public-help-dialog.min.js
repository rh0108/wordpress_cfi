jQuery(document).ready(function(e){function a(a=!1){a?e("#epkb-help_dialog__contact-box-container").addClass("epkb-help_dialog__loading"):e(".epkb-help-dialog__search-results-container").addClass("epkb-help_dialog__loading"),e(".eckb-help_dialog__loading-spinner").show()}function _(a=!1){a?e("#epkb-help_dialog__contact-box-container").removeClass("epkb-help_dialog__loading"):e(".epkb-help-dialog__search-results-container").removeClass("epkb-help_dialog__loading"),e(".eckb-help_dialog__loading-spinner").hide()}function l(){e(".eckb-help_dialog__header-back-icon").show(),e(".eckb-help_dialog__header-logo").hide()}function t(){e(".eckb-help_dialog__header-back-icon").hide(),e(".eckb-help_dialog__header-logo").show()}e(".eckb-help-dialog-toggle__right_away").length&&jQuery(".eckb-help-dialog-toggle__right_away").show(),e(".eckb-help-dialog-toggle__after_delay").length&&setTimeout(function(){jQuery(".eckb-help-dialog-toggle__after_delay").show()},1e3),e("body").on("click",".epkb-help_dialog_cat-item",function(a){if(a.preventDefault(),""===e(this).data("category"))return;let _=e(this).data("category");e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__cat-article").addClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__cat-article .epkb-help_dialog_article-box").hide(),e("#epkb-help_dialog__cat-article .epkb-help_dialog_article-box[data-category="+_+"]").show(),l()}),e("body").on("click",".epkb-help_dialog_article-item",function(t){if(t.preventDefault(),""!==e(this).data("kb-article-id")){var o={action:"epkb_help_dialog_article_detail",article_id:e(this).data("kb-article-id"),type:e(this).data("type")},i="";e.ajax({type:"POST",dataType:"json",data:o,url:ajaxurl,beforeSend:function(e){a()}}).done(function(e){e=e||"",_(),i=e.error||"success"!==e.status?epkb_vars.msg_try_again:e.search_result}).fail(function(e,a,_){i=epkb_vars.msg_try_again+". ["+(_||epkb_vars.unknown_error)+"]"}).always(function(){_(),i&&(e(".eckb-help-dialog-body-container").removeClass("eckb-hd-body--show-both-columns"),e(".eckb-help-dialog-body-container").addClass("eckb-hd-body--show-right-col-only"),e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__search_results-cat-article-details").addClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__search_results-cat-article-details").html(i),l())})}}),e("body").on("input","#epkb-help_dialog__search-terms",function(){e(this).val().length>=3&&(!function(l,o){let i=l,c=i.val();i.data("kb-id"),setTimeout(function(){if(c===i.val()){var l={action:"epkb_help_dialog_search_kb",search_terms:c};e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:l,beforeSend:function(e){a()}}).done(function(e){e=e||"",_(),e.error||"success"!==e.status?msg=epkb_vars.msg_try_again:msg=e.search_result}).fail(function(e,a,_){msg=epkb_vars.msg_try_again+". ["+(_||epkb_vars.unknown_error)+"]"}).always(function(){_(),msg&&(e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__search_results").addClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__search_results").html(msg),t())})}},o)}(e(this),500),e(".eckb-help-dialog-body-container").addClass(" eckb-hd-body--show-both-columns "),e(".eckb-hd-faq__list__item-container").removeClass("eckb-hd-faq__list__item--active"))}),e("#epkb-help_dialog__search-terms").keyup(function(a){(!e(this).val()||e(this).val().length<3)&&(e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__cat").addClass("epkb-help_dialog__search_step_active"))}),e(".eckb-help-dialog-toggle").on("click",function(){var a=e(this).find("i");a.hasClass("epkbfa-comments-o")?(!e(".epkb-help_dialog_categories").length&&e(".eckb-help-dialog-search-container").length,a.removeClass("epkbfa-comments-o"),a.addClass("epkbfa-close"),e(".eckb-help-dialog-search-container").length?(e(".eckb-help-dialog-search-container").show(),e(".eckb-help_dialog__contact").hide(),e(".eckb-help_dialog__header-button-contact").show(),e(".eckb-help_dialog__header-button-search").hide(),e(".eckb-help_dialog__header_faq__title").show(),e(".eckb-help_dialog__header_contact__title").hide()):(e(".eckb-help_dialog__contact").show(),e(".eckb-help_dialog__header-button-contact").hide(),e(".eckb-help_dialog__header_faq__title").hide(),e(".eckb-help_dialog__header_contact__title").show()),e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__cat").addClass("epkb-help_dialog__search_step_active"),e("#eckb-help-dialog").show(),t()):(a.removeClass("epkbfa-close"),a.addClass("epkbfa-comments-o"),e("#eckb-help-dialog").hide())}),e(document.body).on("click",".eckb-hd-faq__list__item-container",function(a){e(".eckb-hd-faq__list__item-container").removeClass("eckb-hd-faq__list__item--active"),e(".eckb-help-dialog-body-container").removeClass("eckb-hd-body--show-right-col-only"),e(".eckb-help-dialog-body-container").removeClass("eckb-hd-body--show-both-columns"),e(this).toggleClass("eckb-hd-faq__list__item--active")}),e(".eckb-help_dialog__header-button-contact").on("click",function(){e(this).hide(),e(".eckb-help-dialog-search-container").hide(),e(".eckb-help_dialog__contact").show(),e(".eckb-help_dialog__header-button-search").show(),e(".eckb-help_dialog__header_faq__title").hide(),e(".eckb-help_dialog__header_contact__title").show(),t()}),e(".eckb-help_dialog__header-button-search").on("click",function(){e(this).hide(),e(".eckb-help-dialog-search-container").show(),e(".eckb-help_dialog__contact").hide(),e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e("#epkb-help_dialog__cat").addClass("epkb-help_dialog__search_step_active"),e(".eckb-help_dialog__header-button-contact").show(),e(".eckb-help_dialog__header_faq__title").show(),e(".eckb-help_dialog__header_contact__title").hide(),t()}),e(".eckb-help_dialog__header-back-icon").on("click",function(){let a=e(".epkb-help_dialog__search_step_active").data("step"),_=a-1==0?2:a-1;4==a&&e(".epkb-help_dialog_type_search").length&&(_=1),1!=_&&2!=_||t(),e(".epkb-help_dialog__search_step").removeClass("epkb-help_dialog__search_step_active"),e(".epkb-help_dialog__search_step[data-step="+_+"]").addClass("epkb-help_dialog__search_step_active")}),e(document).on("submit","#epkb-help_dialog__contact-form",function(l){if(l.preventDefault(),!jQuery("#eckb-help-dialog").is(":visible"))return;if(!jQuery(".eckb-help_dialog__contact").is(":visible"))return;let t=e(this);e.ajax({type:"POST",dataType:"json",url:ajaxurl,data:t.serialize(),beforeSend:function(e){a(!0)}}).done(function(a){void 0!==a.success&&0==a.success?e(".epkb-help_dialog__contact-form-response").html(a.data):void 0!==a.success&&1==a.success?e(".epkb-help_dialog__contact-form-response").html(a.data):e(".epkb-help_dialog__contact-form-response").html(epkb_vars.msg_try_again)}).fail(function(a,_,l){e(".epkb-help_dialog__contact-form-response").html(epkb_vars.msg_try_again)}).always(function(){_(!0)})})});